//!function(e){var t={replaceURL:false,target:"#loadingbar-frame",direction:"right",async:true,complete:function(e,t){},cache:true,error:function(e,t,n){},global:true,headers:{},statusCode:{},success:function(e,t,n){},dataType:"html"};e.fx.step.textShadowBlur=function(t){e(t.elem).prop("textShadowBlur",t.now).css({textShadow:"0 0 "+Math.floor(t.now)+"px black"})};e.fn.loadingbar=function(n){var r=e.extend({},t,n),i=e(this),s=i.attr("href"),o=i.data("target")?i.data("target"):r.target,u=i.data("type")?i.data("type"):r.type,a=i.data("datatype")?i.data("datatype"):r.dataType;return this.each(function(){i.click(function(){e.ajax({type:u,url:s,async:r.async,complete:r.complete,cache:r.cache,error:r.error,global:r.global,headers:r.headers,statusCode:r.statusCode,success:r.success,dataType:a,beforeSend:function(){if(e("#loadingbar").length===0){e("body").append("<div id='loadingbar'></div>");e("#loadingbar").addClass("waiting").append(e("<dt/><dd/>"));switch(r.direction){case"right":e("#loadingbar").width(50+Math.random()*30+"%");break;case"left":e("#loadingbar").addClass("left").animate({right:0,left:100-(50+Math.random()*30)+"%"},200);break;case"down":e("#loadingbar").addClass("down").animate({left:0,height:50+Math.random()*30+"%"},200);break;case"up":e("#loadingbar").addClass("up").animate({left:0,top:100-(50+Math.random()*30)+"%"},200);break}}}}).always(function(){switch(r.direction){case"right":e("#loadingbar").width("101%").delay(200).fadeOut(400,function(){e(this).remove()});break;case"left":e("#loadingbar").css("left","0").delay(200).fadeOut(400,function(){e(this).remove()});break;case"down":e("#loadingbar").height("101%").delay(200).fadeOut(400,function(){e(this).remove()});break;case"up":e("#loadingbar").css("top","0").delay(200).fadeOut(400,function(){e(this).remove()});break}}).done(function(t){if(history.replaceState&&r.replaceURL==true)history.pushState({},document.title,s);if(r.done){r.done(t,o)}else{e(o).html(t)}});return false})})}}(window.jQuery);

/* ===========================================================
 * jquery-loadingbar.js v1
 * ===========================================================
 * Copyright 2013 Pete Rojwongsuriya.
 * http://www.thepetedesign.com
 *
 * Add a Youtube-like loading bar  
 * to all your AJAX links 
 *
 * https://github.com/peachananr/loading-bar
 *
 * ========================================================== */

!function($) {
    var defaults = {
        replaceURL: false,
        target: "#loadingbar-frame",
        direction: "up",
        url: false,
        type: 'post',
        /* Deafult Ajax Parameters  */
        async: true,
        cache: false,
        error:function(d,e,s){
            console.log('error loadingbar ajax ',d,e,s);
        },
        global: true,
        headers: {},
        statusCode: {},
        done: function(data, text, xhr) {
        },
        success: function(data, text, xhr) {
        },
        dataType: "html",
        data:{}
    };

    $.fx.step.textShadowBlur = function(fx) {
        $(fx.elem).prop('textShadowBlur', fx.now).css({textShadow: '0 0 ' + Math.floor(fx.now) + 'px black'});
    };

    $.loadingbar = function(options) {
        var settings = $.extend({}, defaults, options);
        return $.ajax({
            type: settings.type,
            url: settings.url,
            async: settings.async,
            cache: settings.cache,
            error: function(d,e) {
                if (settings.error) {
                    settings.error(d,e,settings);
                }
            },
            global: settings.global,
            headers: settings.headers,
            statusCode: settings.statusCode,
            data: settings.data,
            dataType: settings.datatype,
            beforeSend: function() {
                if ($("#loadingbar").length === 0) {
                    $("body").append("<div id='loadingbar'></div>");
                    $("#loadingbar").addClass("waiting").append($("<dt/><dd/>"));

                    switch (settings.direction) {
                        case 'right':
                            $("#loadingbar").width((50 + Math.random() * 30) + "%");
                            break;
                        case 'left':
                            $("#loadingbar").addClass("left").animate({
                                right: 0,
                                left: 100 - (50 + Math.random() * 30) + "%"
                            }, 200);
                            break;
                        case 'down':
                            $("#loadingbar").addClass("down").animate({
                                left: 0,
                                height: (50 + Math.random() * 30) + "%"
                            }, 200);
                            break;
                        case 'up':
                            $("#loadingbar").addClass("up").animate({
                                left: 0,
                                top: 100 - (50 + Math.random() * 30) + "%"
                            }, 200);
                            break;
                    }
                }
                if (settings.beforeSend) settings.beforeSend();
            },
            complete: function() {
                switch (settings.direction) {
                    case 'right':
                        $("#loadingbar").width("101%").delay(200).fadeOut(400, function() {
                            $(this).remove();
                        });
                        break;
                    case 'left':
                        $("#loadingbar").css("left", "0").delay(200).fadeOut(400, function() {
                            $(this).remove();
                        });
                        break;
                    case 'down':
                        $("#loadingbar").height("101%").delay(200).fadeOut(400, function() {
                            $(this).remove();
                        });
                        break;
                    case 'up':
                        $("#loadingbar").css("top", "0").delay(200).fadeOut(400, function() {
                            $(this).remove();
                        });
                        break;
                }
                if (settings.complete) settings.complete();
            },
            success:function(data){
                if (settings.done) settings.done(data);
                if (settings.success) settings.success(data);
            },
            done: function(data) {
                if (history.replaceState && settings.replaceURL == true) {
                    history.pushState({}, document.title, settings.url);
                }
                if (settings.done) {
                    settings.done(data);
                }
            }
        });
    };

//    $.fn.loadingbar = function(options) {
//        var settings = $.extend({}, defaults, options),
//                el = $(this),
//                href = el.attr("href"),
//                target = (el.data("target")) ? el.data("target") : settings.target,
//                type = (el.data("type")) ? el.data("type") : settings.type,
//                datatype = (el.data("datatype")) ? el.data("datatype") : settings.dataType;
//
//        if (settings.url) {
//            href = settings.url;
//        }
//        if (settings.type) {
//            type = settings.type;
//        }
//
//        return this.each(function() {
//            el.click(function() {
//                var a = $.ajax({
//                    type: type,
//                    url: href,
//                    async: settings.async,
//                    complete: settings.complete,
//                    cache: settings.cache,
//                    error: settings.error,
//                    global: settings.global,
//                    headers: settings.headers,
//                    statusCode: settings.statusCode,
//                    success: settings.success,
//                    dataType: datatype,
//                    beforeSend: function() {
//                        if ($("#loadingbar").length === 0) {
//                            $("body").append("<div id='loadingbar'></div>")
//                            $("#loadingbar").addClass("waiting").append($("<dt/><dd/>"));
//
//                            switch (settings.direction) {
//                                case 'right':
//                                    $("#loadingbar").width((50 + Math.random() * 30) + "%");
//                                    break;
//                                case 'left':
//                                    $("#loadingbar").addClass("left").animate({
//                                        right: 0,
//                                        left: 100 - (50 + Math.random() * 30) + "%"
//                                    }, 200);
//                                    break;
//                                case 'down':
//                                    $("#loadingbar").addClass("down").animate({
//                                        left: 0,
//                                        height: (50 + Math.random() * 30) + "%"
//                                    }, 200);
//                                    break;
//                                case 'up':
//                                    $("#loadingbar").addClass("up").animate({
//                                        left: 0,
//                                        top: 100 - (50 + Math.random() * 30) + "%"
//                                    }, 200);
//                                    break;
//                            }
//                        }
//                    }
//                });
//                a.always(function() {
//                    switch (settings.direction) {
//                        case 'right':
//                            $("#loadingbar").width("101%").delay(200).fadeOut(400, function() {
//                                $(this).remove();
//                            });
//                            break;
//                        case 'left':
//                            $("#loadingbar").css("left", "0").delay(200).fadeOut(400, function() {
//                                $(this).remove();
//                            });
//                            break;
//                        case 'down':
//                            $("#loadingbar").height("101%").delay(200).fadeOut(400, function() {
//                                $(this).remove();
//                            });
//                            break;
//                        case 'up':
//                            $("#loadingbar").css("top", "0").delay(200).fadeOut(400, function() {
//                                $(this).remove();
//                            });
//                            break;
//                    }
//
//                }).done(function(data) {
//                    if (history.replaceState && settings.replaceURL == true)
//                        history.pushState({}, document.title, href);
//                    if (settings.done) {
//                        settings.done(data, target)
//                    } else {
//                        $(target).html(data)
//                    }
//
//                });
//                return false
//            });
//
//
//        });
//    }

}(window.jQuery);


